schema: '2.0'
stages:
  extract_weights:
    cmd: python scripts/extract_weights.py
    deps:
    - path: scripts/extract_weights.py
      md5: d2aa5979aa7693e6c243788b69345a96
      size: 672
    - path: weights/raw
      md5: 82efb930fec3e400d16614685ba144b7.dir
      size: 116174681
      nfiles: 1
    outs:
    - path: weights/weights.pt
      md5: 36465137a846261004e49a164cdb3093
      size: 46095433
  download_data:
    cmd: python scripts/download_data.py
    outs:
    - path: data
      md5: e252d2c8ba36d1ab3e21a873ab62daa3.dir
      size: 356712185
      nfiles: 9
  download_weights:
    cmd: gdown 14_nH2FkyKbt61cieQDiSbBVNP8-gtwgF -O weights/raw/
    outs:
    - path: weights/raw
      md5: 82efb930fec3e400d16614685ba144b7.dir
      size: 116174681
      nfiles: 1
  train:
    cmd: python main.py -c params.yaml
    deps:
    - path: cifar_simclr_resnet
      md5: eca35ef51d8ccb37f74b9eb8f7ea13ec.dir
      size: 8998
      nfiles: 9
    - path: data
      md5: e252d2c8ba36d1ab3e21a873ab62daa3.dir
      size: 356712185
      nfiles: 9
    - path: weights/weights.pt
      md5: 36465137a846261004e49a164cdb3093
      size: 46095433
    params:
      params.yaml:
        data:
          train_size: 0.01
        model:
          pretrained: false
        trainer:
          logger: dvclive.lightning.DVCLiveLogger
          enable_checkpointing: true
          callbacks:
          - class_path: pytorch_lightning.callbacks.ModelCheckpoint
            init_args:
              dirpath: dvclive/models
          max_epochs: 100
          accelerator: gpu
    outs:
    - path: dvclive/metrics.json
      md5: 4105c3dd953a78a1441cda0a1577cf21
      size: 316
    - path: dvclive/models
      md5: c1c36cfe44a3c8faed7aeeb0f1d946d2.dir
      size: 138214007
      nfiles: 1
    - path: dvclive/plots
      md5: d87494404da91778a5a9570774b6a058.dir
      size: 5646
      nfiles: 7
